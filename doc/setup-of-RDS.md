# RDS構築手順  

## 【概要】  

日報APIシステムで利用するデータベースインスタンスを構築する。

## 【目的】  

システムで利用するデータ等を保存するため。

## 【手順】  

### 1.サブネットグループ作成

- 検索タブにて「RDS」と入力し、画面遷移  

![WS000000_LI](https://user-images.githubusercontent.com/89679815/146916397-03d6a245-16cb-4acc-a72d-60a43ae550a9.jpg)

- 「サブネットグループ」を選択し、「DBサブネットグループを作成」を押下  

- 以下の値を入力し、「作成」を押下  

【サブネットグループの詳細】
| 項目  |            値             |
| :---: | :-----------------------: |
| 名前  | dr-prod-rds-subnetgroup01 |
| 説明  |   subnet group for rds    |
|  VPC  |       dr-prod-vpc01       |

【サブネットを追加】  
|          項目          |       値        |
| :--------------------: | :-------------: |
| アベイラビリティゾーン | ap-northeast-1a |
| アベイラビリティゾーン | ap-northeast-1c |
|       サブネット       | 192.168.2.0/24  |
|       サブネット       | 192.168.3.0/24  |

![WS000002](https://user-images.githubusercontent.com/89679815/146916430-6f48ddce-4386-4864-89f4-f3b594358f66.JPG)

- サブネットグループが作成されていることを確認

![WS000001](https://user-images.githubusercontent.com/89679815/146916425-87b7c8ae-834d-4ab1-920c-0b24135f92a8.JPG)

### 2.RDSインスタンス作成

- 「ダッシュボード」にて「データベースの作成」を押下  

- 以下の値を設定し、「データベースの作成」を押下  

![WS000000](https://user-images.githubusercontent.com/89679815/146921104-bb51f87c-64a6-43db-b509-1b7525730ab4.JPG)

【データベース作成方法を選択】  

→「標準作成」  

【エンジンのオプション】  

|       項目       |       値        |
| :--------------: | :-------------: |
| エンジンのタイプ |      MySQL      |
|   エディション   | MySQL Community |
|    バージョン    |  MySQL 8.0.23   |

![WS000001](https://user-images.githubusercontent.com/89679815/146921113-7785a76d-ffb6-4800-8657-d80ae47fbe8d.JPG)

【テンプレート】  

→「無料利用枠」    

【設定】  

|         項目         |          値           |
| :------------------: | :-------------------: |
| DBインスタンス識別子 |       dr-rds01        |
|  マスターユーザー名  |         admin         |
| パスワードの自動生成 |         無効          |
|  マスターパスワード  | ****** (作成時に設定) |

![WS000002](https://user-images.githubusercontent.com/89679815/146921117-1bacfc2e-f0c6-4a31-af74-3d5c228b386d.JPG)

【DBインスタンスクラス】  

|            項目            |               値                |
| :------------------------: | :-----------------------------: |
|    DBインスタンスクラス    | バースト可能クラス(db.t2.micro) |
| 以前の世代のクラスを含める |              無効               |

【ストレージ】  

|                 項目                 |      値      |
| :----------------------------------: | :----------: |
|           ストレージタイプ           | 汎用SSD(gp2) |
|          ストレージ割り当て          |      20      |
| ストレージの自動スケールを有効にする |     有効     |
|          最大ストレージ閾値          |     1000     |

![WS000003](https://user-images.githubusercontent.com/89679815/146921121-15814c97-3dd8-438a-acbd-7f42b141a0a1.JPG)

【可用性と耐久性】  
→「空白」

【接続】  
|            項目            |            値             |
| :------------------------: | :-----------------------: |
|            VPC             |       dr-prod-vpc01       |
|     サブネットグループ     | dr-prod-rds-subnetgroup01 |
|     パブリックアクセス     |           なし            |
|  VPCセキュリティグループ   |        既存の選択         |
| 既存のセキュリティグループ |     dr-prod-rds-sg01      |
|   アベイラビリティゾーン   |      ap-northeast-1a      |
|     データベースポート     |     3306(デフォルト)      |

![WS000004](https://user-images.githubusercontent.com/89679815/146921128-1cb07b84-f8a1-4fb4-9a18-bedb782e8594.JPG)

【データベース認証】  
→「パスワード認証」

【追加設定】
|                 項目                 |        値        |
| :----------------------------------: | :--------------: |
|         最初のデータベース名         | daily_report_01  |
|         DBパラメータグループ         | default.mysql8.0 |
|          オプショングループ          | default.mysql8.0 |
|           自動バックアップ           |       有効       |
|         バックアップ保持期間         |      7日間       |
|        バックアップウィンドウ        |     設定なし     |
|     スナップ書っとにタグをコピー     |       有効       |
|        拡張モニタリング有効化        |       無効       |
|          ログのエクスポート          |    エラーログ    |
| マイナーバージョン自動アップグレード |       有効       |

![WS000005](https://user-images.githubusercontent.com/89679815/146921747-fd57dbc6-c5cf-471d-9e8b-f982e5c1fa62.JPG)

![WS000006](https://user-images.githubusercontent.com/89679815/146921754-7928f621-ea30-463a-bb15-250d35f54272.JPG)

![WS000007](https://user-images.githubusercontent.com/89679815/146921757-72f13163-e6b2-4f01-a80b-8322493432bb.png)

- データベースが作成されたことを確認
